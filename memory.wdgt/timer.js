
ack.module("ack.tools.timer",function(d){d.CountDown=function(d,j,k){var c=this,g=(k||"")+"_timer",a=null,e=null,b=null,f=null;c.__defineGetter__("onTick",function(){return e});c.__defineSetter__("onTick",function(a){e=a});c.__defineGetter__("isRunning",function(){return a.isRunning});c.__defineGetter__("isPaused",function(){return c.isRunning?b?!1:!0:!1});c.__defineGetter__("isEnded",function(){return 0>=c.remaining});c.__defineGetter__("remaining",function(){return 0>=a.remaining?0:a.remaining});
c.__defineGetter__("remainingFormatted",function(){var a=Math.round(c.remaining/1E3),b=a%60,a=Math.floor(a/60);return(10>a?"0"+a:""+a)+" : "+(10>b?"0"+b:""+b)});var i=function(){var h=(new Date).getTime(),d=h-f;f=h;a.remaining-=d;ack.widgetdb.set(g,a);e&&e(c);0>=a.remaining&&(clearInterval(b),b=null)};c.start=function(){clearInterval(b);b=null;f=(new Date).getTime();a.remaining=d;a.isRunning=!0;ack.widgetdb.set(a);b=setInterval(i,250)};c.stop=function(){clearInterval(b);b=null;a.isRunning=!1;a.remaining=
0;ack.widgetdb.set(g,a)};c.resume=function(){clearInterval(b);b=null;f=(new Date).getTime();a.isRunning=!0;ack.widgetdb.set(a);b=setInterval(i,250)};ack.widgetdb.get(g,function(b){a=b||{isRunning:!1,remaining:0};j(c)})}});
